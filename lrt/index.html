<!--
MTR Train Live Schedule 
GitHub & Sponsor this project: https://github.com/sammyfung/mtrtrain
-->
<html lang="en">
<head>
<title>輕鐵列車即時班次 - sammy.hk</title>
<meta name="description" content="港鐵, 時間表, 輕鐵, 屯門, 元朗, 天水圍"/>
<meta charset="utf-8"/>
<style>
th,td { font-size: 32px; text-align: center; }
.std_text { font-size: 32px; }
.head_text { font-size: 48px; }
</style>
</head>
<body>
<h1 id='pagetitle' class='head_text'>輕鐵列車即時班次 - <a href="https://sammy.hk/">sammy.hk</a></h1>
<p id='current_time' class='std_text'>⌚️ 現在時間： -</p>
<p id='update_time' class='std_text'>⌚️ 更新時間： -</p>
<table id="timetable" border='1' width='100%'>
  <tr><th>列車</th><th>1</th><th>2</th><th>3</th><th>4</th></tr>
</table>
<p class='std_text'>🚆 選擇車站</p>

<h2 class='std_text'>屯門</h2>
<p class='std_text'>
<a href="?stop=1">屯門碼頭</a> | 
<a href="?stop=10">美樂</a> |
<a href="?stop=15">蝴蝶</a> |
<a href="?stop=20">輕鐵車廠</a> |
<a href="?stop=30">龍門</a> |
<a href="?stop=40">青山村</a> |
<a href="?stop=50">青雲</a> |
<a href="?stop=60">建安</a> |
<a href="?stop=70">河田</a> |
<a href="?stop=75">蔡意橋</a> |
<a href="?stop=80">澤豐</a> |
<a href="?stop=90">屯門醫院</a> |
<a href="?stop=100">兆康</a> | 
<a href="?stop=110">麒麟</a> |
<a href="?stop=120">青松</a> |
<a href="?stop=130">建生</a> |
<a href="?stop=140">田景</a> |
<a href="?stop=150">良景</a> |
<a href="?stop=160">新圍</a> |
<a href="?stop=170">石排</a> |
<a href="?stop=180">山景(北)</a> |
<a href="?stop=190">山景(南)</a> |
<a href="?stop=200">鳴琴</a> |
<a href="?stop=212">大興(北)</a> |
<a href="?stop=220">大興(南)</a> |
<a href="?stop=230">銀圍</a> |
<a href="?stop=240">兆禧</a> |
<a href="?stop=250">屯門泳池</a> |
<a href="?stop=260">豐景園</a> |
<a href="?stop=265">兆麟</a> |
<a href="?stop=270">安定</a> |
<a href="?stop=275">友愛</a> |
<a href="?stop=280">市中心</a> |
<a href="?stop=295">屯門</a> |
<a href="?stop=300">杯渡</a> | 
<a href="?stop=310">何福堂</a> |
<a href="?stop=320">新墟</a> |
<a href="?stop=330">景峰</a> |
<a href="?stop=340">鳳地</a> |
<a href="?stop=350">藍地</a> |
<a href="?stop=360">泥圍</a> |
<a href="?stop=370">鍾屋村</a> |
<a href="?stop=920">三聖</a> |
</p>

<h2 class='std_text'>元朗</h2>
<p class='std_text'>
<a href="?stop=380">洪水橋</a> |
<a href="?stop=390">塘坊村</a> |
<a href="?stop=400">屏山</a> |
<a href="?stop=560">水邊圍</a> |
<a href="?stop=570">豐年路</a> |
<a href="?stop=580">康樂路</a> |
<a href="?stop=590">大棠路</a> |
<a href="?stop=600">元朗</a> | 
</p>

<h2 class='std_text'>天水圍</h2>
<p class='std_text'>
  <a href="?stop=425">坑尾村</a> |
  <a href="?stop=430">天水圍</a> |
  <a href="?stop=435">天慈</a> |
  <a href="?stop=445">天耀</a> |
  <a href="?stop=448">樂湖</a> |
  <a href="?stop=450">天湖</a> |
  <a href="?stop=455">銀座</a> |
  <a href="?stop=460">天瑞</a> |
  <a href="?stop=468">頌富</a> |
  <a href="?stop=480">天富</a> |
  <a href="?stop=490">翠湖</a> |
  <a href="?stop=500">天榮</a> |
  <a href="?stop=510">天悅</a> |
  <a href="?stop=520">天秀</a> |
  <a href="?stop=530">濕地公園</a> |
  <a href="?stop=540">天恒</a> |
  <a href="?stop=550">天逸</a> |
</p>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0247336506883797"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-0247336506883797"
     data-ad-slot="9504048053"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr/>
<p class='std_text'>🚆 選擇港鐵綫路 👉 <a href="../?line=AEL">機場快綫</a> | <a href="../?line=TCL">東涌綫</a> | <a href="../?line=TKL">將軍澳綫</a> | <a href="../?line=TML">屯馬綫</a> | <a href="../?line=EAL">東鐵綫</a> | <a href="../?line=SIL">南港島綫</a> | <a href="../?line=TWL">荃灣綫</a> | <a href="../?line=ISL">港島線</a> | <a href="../?line=KTL">觀塘綫</a> | <a href="/mtrtrain/mtrtrain.html">English</a> .</p>
<p class='std_text'>👨<200d>💻 開放源碼 mtrtrain 由 <a href="https://github.com/sammyfung/mtrtrain" target="_blank">@sammyfung</a> 開發，數據來自<a href='https://data.gov.hk/tc-data/dataset/mtr-data2-nexttrain-data'>開放數據平台 DATA.GOV.HK</a> 👍</p>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K0FKV4F132"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K0FKV4F132');
</script>
<!--
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js">
</script>
<script>
  const lrt_stops = {
    1: '屯門碼頭',
    10: '美樂',
    15: '蝴蝶',
    20: '輕鐵車廠',
    30: '龍門',
    40: '青山村',
    50: '青雲',
    60: '建安',
    70: '河田',
    75: '蔡意橋',
    80: '澤豐',
    90: '屯門醫院',
    100: '兆康',
    110: '麒麟',
    120: '青松',
    130: '建生',
    140: '田景',
    150: '良景',
    160: '新圍',
    170: '石排',
    180: '山景(北)',
    190: '山景(南)',
    200: '鳴琴',
    212: '大興(北)',
    220: '大興(南)',
    230: '銀圍',
    240: '兆禧',
    250: '屯門泳池',
    260: '豐景園',
    265: '兆麟',
    270: '安定',
    275: '友愛',
    280: '市中心',
    295: '屯門',
    300: '杯渡',
    310: '何福堂',
    320: '新墟',
    330: '景峰',
    340: '鳳地',
    350: '藍地',
    360: '泥圍',
    370: '鍾屋村',
    380: '洪水橋',
    390: '塘坊村',
    400: '屏山',
    425: '坑尾村',
    430: '天水圍',
    435: '天慈',
    445: '天耀',
    448: '樂湖',
    450: '天湖',
    455: '銀座',
    460: '天瑞',
    468: '頌富',
    480: '天富',
    490: '翠湖',
    500: '天榮',
    510: '天悅',
    520: '天秀',
    530: '濕地公園',
    540: '天恒',
    550: '天逸',
    560: '水邊圍',
    570: '豐年路',
    580: '康樂路',
    590: '大棠路',
    600: '元朗',
    920: '三聖',
  }
  function updateTime() {
      const now = new Date();
      const optionsDate = { year: 'numeric', month: 'long', day: 'numeric' };
      const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
      document.getElementById('current_time').innerText = '⌚️ 現在時間：' + now.toLocaleDateString('zh-HK', optionsDate) + now.toLocaleTimeString('zh-HK', optionsTime);
  }

  setInterval(updateTime, 1000);
  updateTime(); // Initial call to display time immediately

  var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
  };

  const stop = getUrlParameter('stop');
  //console.log(`stop = {stop}`);
  const url = 'https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=' + stop;
  const stop_title = `${lrt_stops[stop]} - 輕鐵列車即時班次`;
  document.title = stop_title + ' - sammy.hk';
  $('#pagetitle').html(stop_title + ' - <a href="https://sammy.hk/">sammy.hk</a>');
  $.getJSON(url, function( data ) {
    /*const system_time = new Date(data.system_time.replace(' ', 'T'));
    const optionsDate = { year: 'numeric', month: 'long', day: 'numeric' };
    const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
    const formattedDate = date.toLocaleDateString('zh-HK', optionsDate);
    const formattedTime = date.toLocaleTimeString('zh-HK', optionsTime);*/
    $('#update_time').html(`⌚️ 更新時間：${data.system_time}`);
    $.each( data.platform_list, function( key, val ) {
      $("#timetable").append(`<tr id='platform${val.platform_id}'><th>月台${val.platform_id}</th</tr>`);
      $.each( val.route_list, function( route_key, route_val ) {
        var train_length = '';
        if (route_val.train_length == 2) {
          train_length = '🚋🚋';
        } else {
          train_length = '🚋';
        };
        $(`#platform${val.platform_id}`).append(`<td>${train_length} ${route_val.route_no} ${route_val.dest_ch} (${route_val.time_ch})</td>`);
      });
      console.log(val);

    });
  });
</script>
</html>
