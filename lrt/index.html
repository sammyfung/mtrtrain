<!--
MTR Train Live Schedule 
GitHub & Sponsor this project: https://github.com/sammyfung/mtrtrain
-->
<html lang="en">
<head>
<title>è¼•éµåˆ—è»Šå³æ™‚ç­æ¬¡ - æ£®è·¯æ­·ç¨‹</title>
<meta name="description" content="æ¸¯éµ, æ™‚é–“è¡¨, è¼•éµ, å±¯é–€, å…ƒæœ—, å¤©æ°´åœ"/>
<meta charset="utf-8"/>
<style>
th,td { font-size: 32px; text-align: center; }
.std_text { font-size: 32px; }
.head_text { font-size: 48px; }
</style>
</head>
<body>
<h1 id='pagetitle' class='head_text'>è¼•éµåˆ—è»Šå³æ™‚ç­æ¬¡ - <a href="https://sammy.hk/">æ£®è·¯æ­·ç¨‹</a></h1>
<p id='current_time' class='std_text'>âŒšï¸ ç¾åœ¨æ™‚é–“ï¼š -</p>
<p id='update_time' class='std_text'>âŒšï¸ æ›´æ–°æ™‚é–“ï¼š -</p>
<table id="timetable" border='1' width='100%'>
  <tr><th>åˆ—è»Š</th><th>1</th><th>2</th><th>3</th><th>4</th></tr>
</table>
<p class='std_text'>ğŸš† é¸æ“‡è»Šç«™</p>

<h2 class='std_text'>å±¯é–€</h2>
<p class='std_text'>
<a href="?stop=1">å±¯é–€ç¢¼é ­</a> | 
<a href="?stop=100">å…†åº·</a> | 
<a href="?stop=300">æ¯æ¸¡</a> | 
</p>

<h2 class='std_text'>å…ƒæœ—</h2>
<p class='std_text'>
<a href="?stop=600">å…ƒæœ—</a> | 
</p>

<h2 class='std_text'>å¤©æ°´åœ</h2>
<p class='std_text'>
<a href="?stop=430">å¤©æ°´åœ</a> | 
</p>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0247336506883797"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-0247336506883797"
     data-ad-slot="9504048053"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr/>
<p class='std_text'>ğŸš† é¸æ“‡æ¸¯éµç¶«è·¯ ğŸ‘‰ <a href="../?line=AEL">æ©Ÿå ´å¿«ç¶«</a> | <a href="../?line=TCL">æ±æ¶Œç¶«</a> | <a href="../?line=TKL">å°‡è»æ¾³ç¶«</a> | <a href="../?line=TML">å±¯é¦¬ç¶«</a> | <a href="../?line=EAL">æ±éµç¶«</a> | <a href="../?line=SIL">å—æ¸¯å³¶ç¶«</a> | <a href="../?line=TWL">èƒç£ç¶«</a> | <a href="../?line=ISL">æ¸¯å³¶ç·š</a> | <a href="../?line=KTL">è§€å¡˜ç¶«</a> | <a href="/mtrtrain/mtrtrain.html">English</a> .</p>
<p class='std_text'>ğŸ‘¨â€ğŸ’» æ­¡è¿åˆ° <a href="https://github.com/sammyfung/mtrtrain" target="_blank">GitHub</a> å›é¥‹æ„è¦‹åŠ Sponsor æ”¯æŒ</p>
<p class='std_text'>ğŸ‘ æ•¸æ“šç”±é¦™æ¸¯æ”¿åºœ<a href='https://data.gov.hk/tc-data/dataset/mtr-data2-nexttrain-data'>é–‹æ”¾æ•¸æ“šå¹³å° DATA.GOV.HK</a>æä¾›</p>
<p class='std_text'>ğŸ™ è«‹å¤šå¤šç€è¦½<a href="https://sammy.hk" target="_blank">æ£®è·¯æ­·ç¨‹</a> ğŸ™</p></body>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K0FKV4F132"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K0FKV4F132');
</script>
<!--
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js">
</script>
<script>
  const lrt_stops = {
    1: 'å±¯é–€ç¢¼é ­',
    100: 'å…†åº·',
    300: 'æ¯æ¸¡',
    430: 'å¤©æ°´åœ',
    600: 'å…ƒæœ—',
  }
  function updateTime() {
      const now = new Date();
      const optionsDate = { year: 'numeric', month: 'long', day: 'numeric' };
      const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
      document.getElementById('current_time').innerText = 'âŒšï¸ ç¾åœ¨æ™‚é–“ï¼š' + now.toLocaleDateString('zh-HK', optionsDate) + now.toLocaleTimeString('zh-HK', optionsTime);
  }

  setInterval(updateTime, 1000);
  updateTime(); // Initial call to display time immediately

  var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
  };

  const stop = getUrlParameter('stop');
  //console.log(`stop = {stop}`);
  const url = 'https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=' + stop;
  const stop_title = `${lrt_stops[stop]} - è¼•éµåˆ—è»Šå³æ™‚ç­æ¬¡`;
  document.title = stop_title + ' - æ£®è·¯æ­·ç¨‹';
  $('#pagetitle').html(stop_title + ' - <a href="https://sammy.hk/">æ£®è·¯æ­·ç¨‹</a>');
  $.getJSON(url, function( data ) {
    /*const system_time = new Date(data.system_time.replace(' ', 'T'));
    const optionsDate = { year: 'numeric', month: 'long', day: 'numeric' };
    const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
    const formattedDate = date.toLocaleDateString('zh-HK', optionsDate);
    const formattedTime = date.toLocaleTimeString('zh-HK', optionsTime);*/
    $('#update_time').html(`âŒšï¸ æ›´æ–°æ™‚é–“ï¼š${data.system_time}`);
    $.each( data.platform_list, function( key, val ) {
      $("#timetable").append(`<tr id='platform${val.platform_id}'><th>æœˆå°${val.platform_id}</th</tr>`);
      $.each( val.route_list, function( route_key, route_val ) {
        var train_length = '';
        if (route_val.train_length == 2) {
          train_length = 'ğŸš‹ğŸš‹';
        } else {
          train_length = 'ğŸš‹';
        };
        $(`#platform${val.platform_id}`).append(`<td>${train_length} ${route_val.route_no} ${route_val.dest_ch} (${route_val.time_ch})</td>`);
      });
      console.log(val);

    });
  });
</script>
</html>
